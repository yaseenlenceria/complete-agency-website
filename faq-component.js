// FAQ Component with Schema Markup for SEO
class FAQComponent {
    constructor() {
        this.faqs = {
            general: [
                {
                    question: "What makes OutSourceSU different from other SEO agencies?",
                    answer: "OutSourceSU stands out as the UK's #1 Rated SEO Agency 2025 due to our proven track record, specialized industry expertise, and commitment to transparent, results-driven strategies. We combine 15+ years of experience with cutting-edge techniques and provide dedicated account management for every client."
                },
                {
                    question: "Why is OutSourceSU the UK's #1 Rated SEO Agency 2025?",
                    answer: "We've earned this recognition through consistent delivery of exceptional results across 500+ client campaigns, maintaining a 94% client satisfaction rate, and achieving average traffic increases of 285%. Our expertise spans all major UK industries and cities, making us the trusted choice for businesses nationwide."
                },
                {
                    question: "How quickly can I expect to see SEO results?",
                    answer: "While SEO is a long-term strategy, most clients see initial improvements within 30-60 days. Significant results typically appear within 3-6 months, with continued growth thereafter. We provide detailed monthly reports showing progress and ROI throughout your campaign."
                },
                {
                    question: "Do you provide SEO services across all UK cities?",
                    answer: "Yes! As the UK's leading SEO agency, we provide comprehensive services across all major UK cities including London, Manchester, Birmingham, Liverpool, Leeds, Sheffield, Bristol, and many more. Our local SEO expertise helps businesses dominate their specific geographic markets."
                },
                {
                    question: "What industries do you specialize in?",
                    answer: "We have proven expertise across multiple industries including Construction & Trade, Legal Services, Healthcare & Dental, Real Estate, Financial Services, Professional Services, and more. Our industry-specific approach ensures your SEO strategy is tailored to your market's unique requirements."
                },
                {
                    question: "Do you offer white label SEO services for agencies?",
                    answer: "Yes, we provide comprehensive white label SEO services for digital agencies and marketing professionals. Our white label solutions include full campaign management, detailed reporting, and ongoing support, allowing you to offer premium SEO services under your brand."
                },
                {
                    question: "How do you guarantee results?",
                    answer: "We offer a 90-day results guarantee - if you don't see measurable improvements in your search rankings and organic traffic within 90 days, we'll continue working for free until you do. This demonstrates our confidence in our proven methodologies and commitment to client success."
                },
                {
                    question: "What is your pricing structure?",
                    answer: "Our SEO packages start from Â£800/month for small businesses and scale based on your requirements. We offer transparent pricing with no hidden fees, and every package includes keyword research, technical optimization, content creation, and monthly reporting."
                },
                {
                    question: "Do you work with businesses outside of major cities?",
                    answer: "Absolutely! While we have strong presence in major UK cities, we work with businesses across the entire country, including smaller towns and rural areas. Our local SEO expertise helps businesses succeed regardless of location."
                },
                {
                    question: "What tools and technologies do you use?",
                    answer: "We use industry-leading SEO tools including SEMrush, Ahrefs, Google Analytics, Search Console, and proprietary tracking systems. Our technology stack ensures we have comprehensive data to optimize your campaigns effectively."
                }
            ],
            construction: [
                {
                    question: "How can SEO help my construction business get more leads?",
                    answer: "Construction SEO helps you appear when potential customers search for services like 'builders near me' or 'construction company [your city]'. We optimize your website to rank for high-intent keywords that drive qualified leads, resulting in more project inquiries and contract opportunities."
                },
                {
                    question: "What construction keywords should I target?",
                    answer: "We target a mix of service-based keywords ('home extension builders', 'commercial construction'), location-based terms ('construction company Manchester'), and project-specific phrases ('kitchen extensions', 'office refurbishments'). Our keyword research identifies the most profitable terms for your specific services."
                },
                {
                    question: "How long does construction SEO take to work?",
                    answer: "Construction businesses typically see initial ranking improvements within 2-3 months, with significant lead increases by month 4-6. The competitive nature of construction search terms requires consistent effort, but the ROI is substantial once rankings are achieved."
                },
                {
                    question: "Do you understand the construction industry?",
                    answer: "Absolutely. Our construction SEO team has worked with builders, contractors, architects, and construction companies across the UK for over 10 years. We understand your seasonal patterns, project cycles, and the importance of local search visibility."
                },
                {
                    question: "Can you help with both residential and commercial construction SEO?",
                    answer: "Yes, we have expertise in both sectors. Residential construction SEO focuses on homeowner searches, while commercial construction targets business decision-makers. We tailor strategies for each sector's unique search behavior and sales cycles."
                }
            ],
            legal: [
                {
                    question: "How can law firm SEO help attract more clients?",
                    answer: "Law firm SEO helps potential clients find your practice when searching for legal services in your area. We optimize for high-value keywords like 'personal injury lawyer [city]' or 'family solicitor near me', ensuring you appear when people need legal representation most."
                },
                {
                    question: "Is SEO suitable for all areas of law?",
                    answer: "Yes, we have successfully implemented SEO strategies for personal injury, family law, criminal defense, corporate law, conveyancing, and more. Each practice area requires a unique approach to keyword targeting and content strategy."
                },
                {
                    question: "How do you handle legal advertising regulations?",
                    answer: "We ensure all SEO content and marketing materials comply with SRA guidelines and legal advertising regulations. Our team understands the importance of maintaining professional standards while effectively marketing legal services."
                },
                {
                    question: "What results can law firms expect from SEO?",
                    answer: "Our legal clients typically see 200-400% increases in qualified inquiries within 6-12 months. We focus on attracting high-value cases rather than just traffic, ensuring your SEO investment directly impacts your practice's revenue."
                }
            ],
            healthcare: [
                {
                    question: "How can dental practice SEO increase patient bookings?",
                    answer: "Dental SEO helps your practice appear when local patients search for dental services. We optimize for terms like 'dentist near me', 'dental implants [city]', and emergency dental services, driving qualified patient inquiries and appointment bookings."
                },
                {
                    question: "Is healthcare SEO compliant with regulations?",
                    answer: "Yes, all our healthcare SEO strategies comply with relevant medical advertising guidelines and professional standards. We ensure your online presence maintains the trust and professionalism expected in healthcare while effectively attracting new patients."
                },
                {
                    question: "What dental services benefit most from SEO?",
                    answer: "High-value services like dental implants, orthodontics, cosmetic dentistry, and emergency dental care see the best ROI from SEO. We also optimize for general dental services to build your patient base across all treatment areas."
                },
                {
                    question: "How do you measure success for healthcare SEO?",
                    answer: "We track patient inquiries, appointment bookings, phone calls, and form submissions. Our healthcare clients typically see 250-500% increases in new patient acquisition within 6-9 months of starting SEO."
                }
            ],
            about: [
                {
                    question: "How long has OutSourceSU been in business?",
                    answer: "OutSourceSU was founded in 2008 and has been delivering exceptional SEO results for over 15 years. We've grown from a small consultancy to one of the UK's most respected digital marketing agencies, helping 500+ businesses achieve their online goals."
                },
                {
                    question: "What is your company's mission?",
                    answer: "Our mission is simple: every business deserves to be found online. We're committed to helping UK businesses achieve sustainable growth through ethical, results-driven SEO strategies that deliver measurable ROI."
                },
                {
                    question: "Where is OutSourceSU located?",
                    answer: "Our headquarters is located at 20-22 Wenlock Road, London, N1 7GU. While based in London, we serve clients across the entire UK, with particular expertise in major cities like Manchester, Birmingham, Leeds, and Liverpool."
                },
                {
                    question: "What makes your team qualified to handle SEO?",
                    answer: "Our team consists of certified SEO specialists, each with 5+ years of experience. We maintain Google Partner status, stay current with all algorithm updates, and continuously train in the latest SEO techniques and tools."
                },
                {
                    question: "How many clients do you currently serve?",
                    answer: "We proudly serve over 500 active clients across various industries throughout the UK. Our client retention rate of 94% demonstrates our commitment to delivering consistent, measurable results."
                }
            ]
        };
    }

    getFAQs(category = 'general') {
        return this.faqs[category] || this.faqs.general;
    }

    render(container, category = 'general') {
        if (!container) {
            console.error('FAQ container not found');
            return;
        }

        container.innerHTML = this.generateHTML(category);
        this.initializeFAQEvents();
    }

    generateFAQSchema() {
        const allFAQs = [...this.faqs.general, ...this.faqs.technical, ...this.faqs.local];

        const faqSchema = {
            "@context": "https://schema.org",
            "@type": "FAQPage",
            "mainEntity": allFAQs.map(faq => ({
                "@type": "Question",
                "name": faq.question,
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": faq.answer
                }
            }))
        };

        const script = document.createElement('script');
        script.type = 'application/ld+json';
        script.textContent = JSON.stringify(faqSchema);
        document.head.appendChild(script);
    }

    init(category = 'general') {
        const faqContainer = document.getElementById('faq-section');
        if (faqContainer) {
            faqContainer.innerHTML = this.generateFAQHTML(category);
            this.initializeFAQInteraction();
        }
    }

    initializeFAQInteraction() {
        // Wait for DOM to be ready
        setTimeout(() => {
            const faqQuestions = document.querySelectorAll('.faq-question');

            faqQuestions.forEach(question => {
                if (question && !question.hasAttribute('data-listener-added')) {
                    question.setAttribute('data-listener-added', 'true');
                    question.addEventListener('click', function() {
                        console.log('FAQ clicked:', this.textContent.trim());

                        const faqItem = this.parentElement;
                        const answer = faqItem.querySelector('.faq-answer');
                        const isActive = faqItem.classList.contains('active');
                        const icon = this.querySelector('.faq-icon');

                        // Close all other answers
                        document.querySelectorAll('.faq-item').forEach(item => {
                            if (item !== faqItem) {
                                item.classList.remove('active');
                                const otherAnswer = item.querySelector('.faq-answer');
                                const otherIcon = item.querySelector('.faq-icon');
                                if (otherAnswer) otherAnswer.style.maxHeight = '0px';
                                if (otherIcon) otherIcon.style.transform = 'rotate(0deg)';
                            }
                        });

                        // Toggle current answer
                        if (!isActive) {
                            faqItem.classList.add('active');
                            if (answer) answer.style.maxHeight = answer.scrollHeight + 'px';
                            if (icon) icon.style.transform = 'rotate(180deg)';
                        } else {
                            faqItem.classList.remove('active');
                            if (answer) answer.style.maxHeight = '0px';
                            if (icon) icon.style.transform = 'rotate(0deg)';
                        }
                    });
                }
            });
        }, 100);
    }
}

// Export for use
if (typeof window !== 'undefined') {
    window.FAQComponent = FAQComponent;
}